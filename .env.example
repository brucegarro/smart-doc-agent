# ==============================================================================
# SMART DOC AGENT - ENVIRONMENT CONFIGURATION
# ==============================================================================
# Copy this file to .env and adjust values for your local machine
# ==============================================================================

# ------------------------------------------------------------------------------
# DATABASE (PostgreSQL + pgvector)
# ------------------------------------------------------------------------------
DB_HOST=db
DB_PORT=5432
DB_USER=doc
DB_PASSWORD=doc
DB_NAME=docdb

# ------------------------------------------------------------------------------
# OBJECT STORAGE (MinIO - S3 Compatible)
# ------------------------------------------------------------------------------
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minio
S3_SECRET_KEY=minio123
S3_BUCKET=doc-bucket
S3_REGION=us-east-1

# MinIO Admin Console Credentials
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=minio123

# ------------------------------------------------------------------------------
# REDIS (Job Queues & Coordination)
# ------------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_QUEUE_INGEST=q:ingest
REDIS_QUEUE_INDEX=q:index

# ------------------------------------------------------------------------------
# MODELS - OLLAMA (Text LLM & VLM)
# ------------------------------------------------------------------------------
OLLAMA_BASE=http://ollama:11434
OLLAMA_KEEP_ALIVE=4h
OLLAMA_NUM_THREADS=16
OLLAMA_NUM_PARALLEL=1
OLLAMA_CONTEXT_LENGTH=8192

# Text LLM for reasoning/extraction/summarization
TEXT_LLM_MODEL=qwen2.5:7b-instruct-q4_K_M

# Vision-Language Model for complex layouts, math formulas, charts
VLM_MODEL=qwen2-vl:7b-instruct-q4_K_M

# ------------------------------------------------------------------------------
# EMBEDDER (Local In-Process)
# ------------------------------------------------------------------------------
EMBEDDER_PROVIDER=local
EMBEDDER_MODEL=BAAI/bge-small-en-v1.5
# ----------------------------------------------------------------------------
# EVALUATOR TUNING
# ----------------------------------------------------------------------------
EVAL_ANSWER_MAX_TOKENS=160

EMBEDDER_NORMALIZE=True

# IMPORTANT: Device selection based on your hardware
# - cpu:  Works everywhere (slowest)
# - mps:  Apple Silicon (M1/M2/M3) - use Metal Performance Shaders
# - cuda: NVIDIA GPUs - requires CUDA setup
EMBEDDER_DEVICE=mps

# ------------------------------------------------------------------------------
# OCR SETTINGS
# ------------------------------------------------------------------------------
# OCR engine: paddleocr (default)
OCR_ENGINE=paddleocr

# Language for OCR (currently only English supported)
OCR_LANG=en

# ------------------------------------------------------------------------------
# WORKER SETTINGS
# ------------------------------------------------------------------------------
# Adjust based on your CPU cores and RAM
# Recommended: 1-2 for laptops, 4-8 for workstations
WORKER_CONCURRENCY=2

# Docker resource limits for worker
WORKER_CPU_LIMIT=4
WORKER_MEMORY_LIMIT=8G

# ------------------------------------------------------------------------------
# APPLICATION SETTINGS
# ------------------------------------------------------------------------------
LOG_LEVEL=INFO

# API port (if enabling API server later)
APP_PORT=8080
